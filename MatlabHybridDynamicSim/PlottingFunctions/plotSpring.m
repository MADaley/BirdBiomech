function plotSpring(pStart, pEnd, springWidth, varargin);%plotSpring Plots a spring between pStart and pEnd. Width specification is%  optional. Optional format parameters will be passed to plot.%%   plotSpring(pStart, pEnd, springWidth, formatparam1, formatparam2,...);%% pStart(1) = pStartx and pStart(2) = pStarty% % Author: Chris Wagner, Copyright 2006if nargin < 4	format = 'b';endspringVec = pEnd-pStart;springLength = norm(springVec);angle = -atan2(springVec(2), springVec(1));if nargin < 3 || isempty(springWidth)	springWidthRatio = 0.15;else	springWidthRatio = springWidth/(2.0*springLength);endnumSquiggles=4;squiggleSpacing = (.75-.25)/numSquiggles;x = [0.0 .25 (.25+squiggleSpacing/4.0):squiggleSpacing/2.0:(.75-squiggleSpacing/4.0) .75 1.0];y = [0.0 0.0 repmat([springWidthRatio -springWidthRatio], 1, numSquiggles) 0.0 0.0];% Now scale and rotaterotMat = [cos(angle) sin(angle); -sin(angle) cos(angle)];rotCoords = rotMat*[x; y]*springLength + repmat([pStart(1); pStart(2)], 1, length(x));plot(rotCoords(1,:),rotCoords(2,:),varargin{:});